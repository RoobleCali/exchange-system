"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "components_Protected_js";
exports.ids = ["components_Protected_js"];
exports.modules = {

/***/ "./components/Protected.js":
/*!*********************************!*\
  !*** ./components/Protected.js ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ RouteGuard)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/router */ \"next/router\");\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_router__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var cookies_next__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! cookies-next */ \"cookies-next\");\n/* harmony import */ var cookies_next__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(cookies_next__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var nprogress__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! nprogress */ \"nprogress\");\n/* harmony import */ var nprogress__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(nprogress__WEBPACK_IMPORTED_MODULE_3__);\n\n\n\n\nfunction RouteGuard({ children  }) {\n    const router = (0,next_router__WEBPACK_IMPORTED_MODULE_1__.useRouter)();\n    const { 0: authorized , 1: setAuthorized  } = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    const token = (0,cookies_next__WEBPACK_IMPORTED_MODULE_2__.getCookie)(\"token\");\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        // on initial load - run auth check\n        authCheck(router.asPath);\n        // on route change start - hide page content by setting authorized to false\n        const hideContent = ()=>setAuthorized(false)\n        ;\n        router.events.on(\"routeChangeStart\", hideContent);\n        // on route change complete - run auth check\n        router.events.on(\"routeChangeComplete\", authCheck);\n        // unsubscribe from events in useEffect return function\n        return ()=>{\n            // check the router and show nprogress if route is not protected\n            if (router.pathname.replace(\"/\", \"\") === \"login\") {\n                // check the router and show nprogress if route is not protected\n                router.events.off(\"routeChangeStart\", hideContent);\n                router.events.off(\"routeChangeComplete\", authCheck);\n            }\n        };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n    function authCheck(url) {\n        // redirect to login page if accessing a private page and not logged in\n        const publicPaths = [\n            \"/login\"\n        ] || 0;\n        const path = url.split(\"?\")[0];\n        if (!token && !publicPaths.includes(path)) {\n            // check the router and show nprogress if route is not protected\n            router.push(\"/login\");\n            setAuthorized(false);\n            router.push({\n                pathname: \"/login\",\n                query: {\n                    returnUrl: router.asPath\n                }\n            });\n        }\n        //  show nprogress if route is not protected\n        if (!publicPaths.includes(path)) {\n            nprogress__WEBPACK_IMPORTED_MODULE_3___default().start();\n        }\n        // hide nprogress if route is protected\n        if (publicPaths.includes(path)) {\n            nprogress__WEBPACK_IMPORTED_MODULE_3___default().done();\n        }\n    // set authorized to true if logged in\n    }\n    return authorized && children;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9jb21wb25lbnRzL1Byb3RlY3RlZC5qcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBNEM7QUFDSjtBQUNDO0FBQ1A7QUFFbkIsU0FBU0ssVUFBVSxDQUFDLEVBQUVDLFFBQVEsR0FBRSxFQUFFO0lBQy9DLE1BQU1DLE1BQU0sR0FBR0wsc0RBQVMsRUFBRTtJQUMxQixNQUFNLEVBUFIsR0FPU00sVUFBVSxHQVBuQixHQU9xQkMsYUFBYSxNQUFJVCwrQ0FBUSxDQUFDLEtBQUssQ0FBQztJQUNuRCxNQUFNVSxLQUFLLEdBQUdQLHVEQUFTLENBQUMsT0FBTyxDQUFDO0lBQ2hDRixnREFBUyxDQUFDLElBQU07UUFDZCxtQ0FBbUM7UUFDbkNVLFNBQVMsQ0FBQ0osTUFBTSxDQUFDSyxNQUFNLENBQUMsQ0FBQztRQUV6QiwyRUFBMkU7UUFDM0UsTUFBTUMsV0FBVyxHQUFHLElBQU1KLGFBQWEsQ0FBQyxLQUFLLENBQUM7UUFBQztRQUMvQ0YsTUFBTSxDQUFDTyxNQUFNLENBQUNDLEVBQUUsQ0FBQyxrQkFBa0IsRUFBRUYsV0FBVyxDQUFDLENBQUM7UUFFbEQsNENBQTRDO1FBQzVDTixNQUFNLENBQUNPLE1BQU0sQ0FBQ0MsRUFBRSxDQUFDLHFCQUFxQixFQUFFSixTQUFTLENBQUMsQ0FBQztRQUVuRCx1REFBdUQ7UUFDdkQsT0FBTyxJQUFNO1lBQ1gsZ0VBQWdFO1lBQ2hFLElBQUlKLE1BQU0sQ0FBQ1MsUUFBUSxDQUFDQyxPQUFPLENBQUMsR0FBRyxFQUFFLEVBQUUsQ0FBQyxLQUFLLE9BQU8sRUFBRTtnQkFDaEQsZ0VBQWdFO2dCQUNoRVYsTUFBTSxDQUFDTyxNQUFNLENBQUNJLEdBQUcsQ0FBQyxrQkFBa0IsRUFBRUwsV0FBVyxDQUFDLENBQUM7Z0JBQ25ETixNQUFNLENBQUNPLE1BQU0sQ0FBQ0ksR0FBRyxDQUFDLHFCQUFxQixFQUFFUCxTQUFTLENBQUMsQ0FBQzthQUNyRDtTQUNGLENBQUM7SUFFRix1REFBdUQ7S0FDeEQsRUFBRSxFQUFFLENBQUMsQ0FBQztJQUVQLFNBQVNBLFNBQVMsQ0FBQ1EsR0FBRyxFQUFFO1FBQ3RCLHVFQUF1RTtRQUN2RSxNQUFNQyxXQUFXLEdBQUc7WUFBQyxRQUFRO1NBQUMsSUFBSSxDQUFLO1FBQ3ZDLE1BQU1DLElBQUksR0FBR0YsR0FBRyxDQUFDRyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzlCLElBQUksQ0FBQ1osS0FBSyxJQUFJLENBQUNVLFdBQVcsQ0FBQ0csUUFBUSxDQUFDRixJQUFJLENBQUMsRUFBRTtZQUN6QyxnRUFBZ0U7WUFDaEVkLE1BQU0sQ0FBQ2lCLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUN0QmYsYUFBYSxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQ3JCRixNQUFNLENBQUNpQixJQUFJLENBQUM7Z0JBQ1ZSLFFBQVEsRUFBRSxRQUFRO2dCQUNsQlMsS0FBSyxFQUFFO29CQUFFQyxTQUFTLEVBQUVuQixNQUFNLENBQUNLLE1BQU07aUJBQUU7YUFDcEMsQ0FBQyxDQUFDO1NBQ0o7UUFDRCw0Q0FBNEM7UUFDNUMsSUFBSSxDQUFDUSxXQUFXLENBQUNHLFFBQVEsQ0FBQ0YsSUFBSSxDQUFDLEVBQUU7WUFDL0JqQixzREFBZSxFQUFFLENBQUM7U0FDbkI7UUFDRCx1Q0FBdUM7UUFDdkMsSUFBSWdCLFdBQVcsQ0FBQ0csUUFBUSxDQUFDRixJQUFJLENBQUMsRUFBRTtZQUM5QmpCLHFEQUFjLEVBQUUsQ0FBQztTQUNsQjtJQUNELHNDQUFzQztLQUN2QztJQUVELE9BQU9JLFVBQVUsSUFBSUYsUUFBUSxDQUFDO0NBQy9CIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZXhjaGFuZ2Utc3lzdGVtLy4vY29tcG9uZW50cy9Qcm90ZWN0ZWQuanM/MTFmMCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0IH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyB1c2VSb3V0ZXIgfSBmcm9tIFwibmV4dC9yb3V0ZXJcIjtcbmltcG9ydCB7IGdldENvb2tpZSB9IGZyb20gXCJjb29raWVzLW5leHRcIjtcbmltcG9ydCBuUHJvZ3Jlc3MgZnJvbSBcIm5wcm9ncmVzc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBSb3V0ZUd1YXJkKHsgY2hpbGRyZW4gfSkge1xuICBjb25zdCByb3V0ZXIgPSB1c2VSb3V0ZXIoKTtcbiAgY29uc3QgW2F1dGhvcml6ZWQsIHNldEF1dGhvcml6ZWRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCB0b2tlbiA9IGdldENvb2tpZShcInRva2VuXCIpO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIC8vIG9uIGluaXRpYWwgbG9hZCAtIHJ1biBhdXRoIGNoZWNrXG4gICAgYXV0aENoZWNrKHJvdXRlci5hc1BhdGgpO1xuXG4gICAgLy8gb24gcm91dGUgY2hhbmdlIHN0YXJ0IC0gaGlkZSBwYWdlIGNvbnRlbnQgYnkgc2V0dGluZyBhdXRob3JpemVkIHRvIGZhbHNlXG4gICAgY29uc3QgaGlkZUNvbnRlbnQgPSAoKSA9PiBzZXRBdXRob3JpemVkKGZhbHNlKTtcbiAgICByb3V0ZXIuZXZlbnRzLm9uKFwicm91dGVDaGFuZ2VTdGFydFwiLCBoaWRlQ29udGVudCk7XG5cbiAgICAvLyBvbiByb3V0ZSBjaGFuZ2UgY29tcGxldGUgLSBydW4gYXV0aCBjaGVja1xuICAgIHJvdXRlci5ldmVudHMub24oXCJyb3V0ZUNoYW5nZUNvbXBsZXRlXCIsIGF1dGhDaGVjayk7XG5cbiAgICAvLyB1bnN1YnNjcmliZSBmcm9tIGV2ZW50cyBpbiB1c2VFZmZlY3QgcmV0dXJuIGZ1bmN0aW9uXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIC8vIGNoZWNrIHRoZSByb3V0ZXIgYW5kIHNob3cgbnByb2dyZXNzIGlmIHJvdXRlIGlzIG5vdCBwcm90ZWN0ZWRcbiAgICAgIGlmIChyb3V0ZXIucGF0aG5hbWUucmVwbGFjZShcIi9cIiwgXCJcIikgPT09IFwibG9naW5cIikge1xuICAgICAgICAvLyBjaGVjayB0aGUgcm91dGVyIGFuZCBzaG93IG5wcm9ncmVzcyBpZiByb3V0ZSBpcyBub3QgcHJvdGVjdGVkXG4gICAgICAgIHJvdXRlci5ldmVudHMub2ZmKFwicm91dGVDaGFuZ2VTdGFydFwiLCBoaWRlQ29udGVudCk7XG4gICAgICAgIHJvdXRlci5ldmVudHMub2ZmKFwicm91dGVDaGFuZ2VDb21wbGV0ZVwiLCBhdXRoQ2hlY2spO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3QtaG9va3MvZXhoYXVzdGl2ZS1kZXBzXG4gIH0sIFtdKTtcblxuICBmdW5jdGlvbiBhdXRoQ2hlY2sodXJsKSB7XG4gICAgLy8gcmVkaXJlY3QgdG8gbG9naW4gcGFnZSBpZiBhY2Nlc3NpbmcgYSBwcml2YXRlIHBhZ2UgYW5kIG5vdCBsb2dnZWQgaW5cbiAgICBjb25zdCBwdWJsaWNQYXRocyA9IFtcIi9sb2dpblwiXSB8fCBbXCIvXCJdO1xuICAgIGNvbnN0IHBhdGggPSB1cmwuc3BsaXQoXCI/XCIpWzBdO1xuICAgIGlmICghdG9rZW4gJiYgIXB1YmxpY1BhdGhzLmluY2x1ZGVzKHBhdGgpKSB7XG4gICAgICAvLyBjaGVjayB0aGUgcm91dGVyIGFuZCBzaG93IG5wcm9ncmVzcyBpZiByb3V0ZSBpcyBub3QgcHJvdGVjdGVkXG4gICAgICByb3V0ZXIucHVzaChcIi9sb2dpblwiKTtcbiAgICAgIHNldEF1dGhvcml6ZWQoZmFsc2UpO1xuICAgICAgcm91dGVyLnB1c2goe1xuICAgICAgICBwYXRobmFtZTogXCIvbG9naW5cIixcbiAgICAgICAgcXVlcnk6IHsgcmV0dXJuVXJsOiByb3V0ZXIuYXNQYXRoIH0sXG4gICAgICB9KTtcbiAgICB9XG4gICAgLy8gIHNob3cgbnByb2dyZXNzIGlmIHJvdXRlIGlzIG5vdCBwcm90ZWN0ZWRcbiAgICBpZiAoIXB1YmxpY1BhdGhzLmluY2x1ZGVzKHBhdGgpKSB7XG4gICAgICBuUHJvZ3Jlc3Muc3RhcnQoKTtcbiAgICB9XG4gICAgLy8gaGlkZSBucHJvZ3Jlc3MgaWYgcm91dGUgaXMgcHJvdGVjdGVkXG4gICAgaWYgKHB1YmxpY1BhdGhzLmluY2x1ZGVzKHBhdGgpKSB7XG4gICAgICBuUHJvZ3Jlc3MuZG9uZSgpO1xuICAgIH1cbiAgICAvLyBzZXQgYXV0aG9yaXplZCB0byB0cnVlIGlmIGxvZ2dlZCBpblxuICB9XG5cbiAgcmV0dXJuIGF1dGhvcml6ZWQgJiYgY2hpbGRyZW47XG59XG4iXSwibmFtZXMiOlsidXNlU3RhdGUiLCJ1c2VFZmZlY3QiLCJ1c2VSb3V0ZXIiLCJnZXRDb29raWUiLCJuUHJvZ3Jlc3MiLCJSb3V0ZUd1YXJkIiwiY2hpbGRyZW4iLCJyb3V0ZXIiLCJhdXRob3JpemVkIiwic2V0QXV0aG9yaXplZCIsInRva2VuIiwiYXV0aENoZWNrIiwiYXNQYXRoIiwiaGlkZUNvbnRlbnQiLCJldmVudHMiLCJvbiIsInBhdGhuYW1lIiwicmVwbGFjZSIsIm9mZiIsInVybCIsInB1YmxpY1BhdGhzIiwicGF0aCIsInNwbGl0IiwiaW5jbHVkZXMiLCJwdXNoIiwicXVlcnkiLCJyZXR1cm5VcmwiLCJzdGFydCIsImRvbmUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./components/Protected.js\n");

/***/ })

};
;